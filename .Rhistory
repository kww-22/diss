data_conds$Effort <- factor(data_conds$Effort, levels = c('50', '75', '100'))
data_conds$Cond1 <- factor(data_conds$Cond1, levels = c('step', 'crow'))
data_conds$Cond2 <- factor(data_conds$Cond2, levels = c('rpe','velo'))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
data_conds <- data_conds[,c('pID','cond_int','effort','cond_stp','velo')]
file_name_warmup <- str_glue(path, '/velo_csvs/', sheet[i],'_','velos_warmup')
file_name_conds <- str_glue(path,'/velo_csvs/',sheet[i], '_', 'velos_conds')
write_csv(data_warmup, file_name_warmup)
write_csv(data_conds, file_name_conds)
# checks to make sure csv files exist in save directory
if(file.exists(file_name_conds) == TRUE & file.exists(file_name_warmup) == TRUE){
print(str_glue('velos extracted for ', sheet[i]))
}else{
stop('something went wrong, bro')
}
}
}
get_velos()
get_velos()
i <- 1
data <-  read_sheet(ss = url, sheet = sheet[i])
# reads sheet names as one character variable
sheet <- readline('sheet name(s) (separated by commas): ')
# split sheets into separate character variables
sheet <- str_split(sheet,',')
sheet <- str_trim(sheet[[1]])
# edit url if you need to access different googlesheet
url <- 'https://docs.google.com/spreadsheets/d/1PRBYjZcG9b8jB1vttNicup2MhdabkgZY-tJQMLTPxKc/'
# get directory path for csv saving
path <- getwd()
data <-  read_sheet(ss = url, sheet = sheet[i])
data_warmup <- data %>%
select(c('Throw', 'Vel_warm')) %>%
drop_na()
data_warmup$pID <- sheet[i]
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na()
data_conds$pID <- sheet[i]
data_conds$Effort <- factor(data_conds$Effort, levels = c('50', '75', '100'))
data_conds$Cond1 <- factor(data_conds$Cond1, levels = c('step', 'crow'))
data_conds$Cond2 <- factor(data_conds$Cond2, levels = c('rpe','velo'))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
data_conds <- data_conds[,c('pID','cond_int','effort','cond_stp','velo')]
file_name_warmup <- str_glue(path, '/velo_csvs/', sheet[i],'_','velos_warmup')
file_name_conds <- str_glue(path,'/velo_csvs/',sheet[i], '_', 'velos_conds')
write_csv(data_warmup, file_name_warmup)
write_csv(data_warmup, file_name_warmup)
file_name_warmup <- str_glue(path, '/sup/velo_csvs/', sheet[i],'_','velos_warmup')
file_name_conds <- str_glue(path,'/sup/velo_csvs/',sheet[i], '_', 'velos_conds')
get_velos <- function(){
# reads sheet names as one character variable
sheet <- readline('sheet name(s) (separated by commas): ')
# split sheets into separate character variables
sheet <- str_split(sheet,',')
sheet <- str_trim(sheet[[1]])
# edit url if you need to access different googlesheet
url <- 'https://docs.google.com/spreadsheets/d/1PRBYjZcG9b8jB1vttNicup2MhdabkgZY-tJQMLTPxKc/'
# get directory path for csv saving
path <- getwd()
# loops through saving each csvs for each sheet with custom titles based on sheet name
for(i in 1:length(sheet)){
data <-  read_sheet(ss = url, sheet = sheet[i])
data_warmup <- data %>%
select(c('Throw', 'Vel_warm')) %>%
drop_na()
data_warmup$pID <- sheet[i]
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na()
data_conds$pID <- sheet[i]
data_conds$Effort <- factor(data_conds$Effort, levels = c('50', '75', '100'))
data_conds$Cond1 <- factor(data_conds$Cond1, levels = c('step', 'crow'))
data_conds$Cond2 <- factor(data_conds$Cond2, levels = c('rpe','velo'))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
data_conds <- data_conds[,c('pID','cond_int','effort','cond_stp','velo')]
file_name_warmup <- str_glue(path, '/sup/velo_csvs/', sheet[i],'_','velos_warmup')
file_name_conds <- str_glue(path,'/sup/velo_csvs/',sheet[i], '_', 'velos_conds')
write_csv(data_warmup, file_name_warmup)
write_csv(data_conds, file_name_conds)
# checks to make sure csv files exist in save directory
if(file.exists(file_name_conds) == TRUE & file.exists(file_name_warmup) == TRUE){
print(str_glue('velos extracted for ', sheet[i]))
}else{
stop('something went wrong, bro')
}
}
}
get_velos()
data <-  read_sheet(ss = url, sheet = sheet[i])
data_warmup <- data %>%
select(c('Throw', 'Vel_warm')) %>%
drop_na()
data_warmup$pID <- sheet[i]
data_warmup$Vel_max <- max(data_warmup$Vel_warm)
View(data_warmup)
read_sheet(ss = url, sheet = 'Demos')
demos <- read_sheet(ss = url, sheet = 'Demos')
View(demos)
# get demo info for level 2 vars
demos <- read_sheet(ss = url, sheet = 'Demos')
demos$Height[1]
data_warmup$pID <- sheet[i]
data_warmup$Vel_max <- max(data_warmup$Vel_warm)
data_warmup$Vel_min <- min(data_warmup$Vel_warm)
data_warmup$height <- demos$Height[i]
data_warmup$mass <- demos$Weight[i]
data_warmup$age <- demos$Age[i]
data_warmup$hand <- demos$Hand[i]
data_warmup$hand <- factor(demos$Hand[i])
data_warmup <- data_warmup %>%
rename(velo = Vel_warm)
data_warmup <- data %>%
select(c('Throw', 'Vel_warm')) %>%
drop_na()
data_warmup$pID <- sheet[i]
data_warmup$velo_max <- max(data_warmup$Vel_warm)
data_warmup$velo_min <- min(data_warmup$Vel_warm)
data_warmup$height <- demos$Height[i]
data_warmup$mass <- demos$Weight[i]
data_warmup$age <- demos$Age[i]
data_warmup$hand <- factor(demos$Hand[i])
data_warmup <- data_warmup %>%
rename(velo = Vel_warm)
?mutate
data_warmup <- data %>%
select(c('Throw', 'Vel_warm')) %>%
drop_na() %>%
mutate(pID = sheet[i],
velo_max = max(Vel_warm))
data_warmup <- data %>%
select(c('Throw', 'Vel_warm')) %>%
drop_na() %>%
rename(velo = Vel_warm) %>%
mutate(pID = sheet[i],
velo_max = max(velo),
velo_min = min(velo),
height = demos$Height[i],
mass = demos$Weight[i],
age = demos$Age[i],
hand = factor(demos$Hand[i]))
data_warmup <- data %>%
select(c('Throw', 'Vel_warm')) %>%
drop_na() %>%
rename(velo = Vel_warm,
throw = Throw) %>%
mutate(pID = sheet[i],
velo_max = max(velo),
velo_min = min(velo),
height = demos$Height[i],
mass = demos$Weight[i],
age = demos$Age[i],
hand = factor(demos$Hand[i])) %>%
arrange(pID,age, mass, height, hand, throw, velo, velo_max, velo_min)
data_warmup <- data %>%
select(c('Throw', 'Vel_warm')) %>%
drop_na() %>%
rename(velo = Vel_warm,
throw = Throw) %>%
mutate(pID = sheet[i],
velo_max = max(velo),
velo_min = min(velo),
height = demos$Height[i],
mass = demos$Weight[i],
age = demos$Age[i],
hand = factor(demos$Hand[i])) %>%
arrange(pID,age, mass, height, hand, throw, velo, velo_max, velo_min)
View(data_warmup)
data_warmup <- data_warmup[,c('pID','age', 'mass', 'height', 'hand', 'throw', 'velo_max', 'velo_min','velo')]
View(data_warmup)
data_warmup <- data_warmup[,c('pID','age', 'mass', 'height', 'hand', 'velo_max', 'velo_min', 'throw', 'velo')]
View(data_warmup)
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = sheet[i],
effort = factor(data_conds$Effort, levels = c('50', '75', '100')),
Cond1 = factor(data_conds$Cond1, levels = c('step', 'crow')),
Cond2 = factor(data_conds$Cond2, levels = c('rpe','velo')))
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = sheet[i],
effort = factor(data_conds$Effort, levels = c('50', '75', '100')),
Cond1 = factor(data_conds$Cond1, levels = c('step', 'crow')),
Cond2 = factor(data_conds$Cond2, levels = c('rpe','velo')))
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = sheet[i],
Effort = factor(data_conds$Effort, levels = c('50', '75', '100')),
Cond1 = factor(data_conds$Cond1, levels = c('step', 'crow')),
Cond2 = factor(data_conds$Cond2, levels = c('rpe','velo')))
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = sheet[i],
Effort = factor(data_conds$Effort, levels = c('50', '75', '100')),
Cond1 = factor(data_conds$Cond1, levels = c('step', 'crow')),
Cond2 = factor(data_conds$Cond2, levels = c('rpe','velo')))
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons'))
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na()
View(data_conds)
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = sheet[i],
Effort = factor(data_conds$Effort, levels = c('50', '75', '100')),
Cond1 = factor(data_conds$Cond1, levels = c('step', 'crow')),
Cond2 = factor(data_conds$Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
View(data_conds)
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = sheet[i],
Effort = factor(data_conds$Effort, levels = c('50', '75', '100')),
Cond1 = factor(data_conds$Cond1, levels = c('step', 'crow')),
Cond2 = factor(data_conds$Cond2, levels = c('rpe','velo')))
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = sheet[i],
Effort = factor(data_conds$Effort, levels = c('50', '75', '100')),
Cond1 = factor(data_conds$Cond1, levels = c('step', 'crow')),
Cond2 = factor(data_conds$Cond2, levels = c('rpe','velo')))
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = sheet[i],
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = factor(sheet[i]),
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = factor(sheet[i]),
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = factor(sheet[i]),
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
data_conds <- data_conds[,c('pID','cond_int','effort','cond_stp','velo')]
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
data_conds <- data_conds[,c('pID','cond_int','effort','cond_stp','velo')]
View(data_conds)
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = factor(sheet[i]),
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,cond_stp)
data_conds <- data_conds[,c('pID','cond_int','effort','cond_stp','velo')]
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = factor(sheet[i]),
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort)
data_conds <- data_conds[,c('pID','cond_int','effort','cond_stp','velo')]
View(data_conds)
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = factor(sheet[i]),
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort)
arrange(pID,cond_int,effort) %>%
arrange(desc(cond_stp))
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = factor(sheet[i]),
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort) %>%
arrange(desc(cond_stp))
View(data_conds)
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = factor(sheet[i]),
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,desc(cond_stp))
View(data_conds)
data_conds <- data_conds[,c('pID','cond_int','effort','cond_stp','velo')]
View(data_conds)
get_velos <- function(){
# reads sheet names as one character variable
sheet <- readline('sheet name(s) (separated by commas): ')
# split sheets into separate character variables
sheet <- str_split(sheet,',')
sheet <- str_trim(sheet[[1]])
# edit url if you need to access different googlesheet
url <- 'https://docs.google.com/spreadsheets/d/1PRBYjZcG9b8jB1vttNicup2MhdabkgZY-tJQMLTPxKc/'
# get directory path for csv saving
path <- getwd()
# get demo info for level 2 vars
demos <- read_sheet(ss = url, sheet = 'Demos')
# loops through saving each csvs for each sheet with custom titles based on sheet name
for(i in 1:length(sheet)){
data <-  read_sheet(ss = url, sheet = sheet[i])
data_warmup <- data %>%
select(c('Throw', 'Vel_warm')) %>%
drop_na() %>%
rename(velo = Vel_warm,
throw = Throw) %>%
mutate(pID = sheet[i],
velo_max = max(velo),
velo_min = min(velo),
height = demos$Height[i],
mass = demos$Weight[i],
age = demos$Age[i],
hand = factor(demos$Hand[i]))
data_warmup <- data_warmup[,c('pID','age', 'mass', 'height', 'hand', 'velo_max', 'velo_min', 'throw', 'velo')]
data_conds <- data %>%
select(c('Effort', 'Cond1', 'Cond2', 'Vel_cons')) %>%
drop_na() %>%
mutate(pID = factor(sheet[i]),
Effort = factor(Effort, levels = c('50', '75', '100')),
Cond1 = factor(Cond1, levels = c('step', 'crow')),
Cond2 = factor(Cond2, levels = c('rpe','velo')))
# get condition df in same order as c3d files
data_conds <- data_conds %>%
rename(cond_stp = Cond1,
cond_int = Cond2,
velo = Vel_cons,
effort = Effort) %>%
arrange(pID,cond_int,effort,desc(cond_stp))
data_conds <- data_conds[,c('pID','cond_int','effort','cond_stp','velo')]
file_name_warmup <- str_glue(path, '/sup/velo_csvs/', sheet[i],'_','velos_warmup')
file_name_conds <- str_glue(path,'/sup/velo_csvs/',sheet[i], '_', 'velos_conds')
write_csv(data_warmup, file_name_warmup)
write_csv(data_conds, file_name_conds)
# checks to make sure csv files exist in save directory
if(file.exists(file_name_conds) == TRUE & file.exists(file_name_warmup) == TRUE){
print(str_glue('velos extracted for ', sheet[i]))
}else{
stop('something went wrong, bro')
}
}
}
get_velos()
get_velos()
# ----------------------------------------------------
# velo_long_maker.R
#
# Purpose: to concatenate participant velo csvs into
# into one long-format mater csv
#
# author: Kyle Wasserberger
#
# Last Updated: 2021-04-15
# ----------------------------------------------------
# get directory path and file info
path <- str_glue(getwd(),'sup/velo_csvs',.sep = '/')
files <- list.files(path = path, pattern = '_')
# interactive input for number of participants
num_peeps <- 7
# create numeric vectors so for loops can separate warmup and condition velo files
file_num_conds <- seq(1,num_peeps*2,2)
file_num_warm <- seq(2,num_peeps*2,2)
# initialize blank data frames
data_conds <- data.frame()
data_warm <- data.frame()
# iterate over data frames using row bind
for(i in 1:num_peeps){
data_new <- read.csv(str_glue(path,files[file_num_conds[i]], .sep = '/'))
data_conds <- rbind.data.frame(data_conds, data_new)
}
for(i in 1:num_peeps){
data_new <- read.csv(str_glue(path,files[file_num_warm[i]], .sep = '/'))
data_warm <- rbind.data.frame(data_warm, data_new)
}
data_conds <- write.csv(data_conds, str_glue(path, 'masters', 'data_conds.csv', .sep = '/'))
data_warm <- write.csv(data_warm, str_glue(path, 'masters', 'data_warm.csv', .sep = '/'))
library(readr)
data_warm <- read_csv("sup/velo_csvs/masters/data_warm.csv")
View(data_warm)
data_warm <- read.csv('masters/data_warm.csv',stringsAsFactors = TRUE)
getwd()
data_warm <- read_csv("sup/velo_csvs/masters/data_warm.csv", stringsAsFactors = TRUE)
data_warm <- read.csv("sup/velo_csvs/masters/data_warm.csv", stringsAsFactors = TRUE)
View(data_warm)
library(readr)
data_conds <- read_csv("sup/velo_csvs/masters/data_conds.csv")
View(data_conds)
getwd()
